<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>事件冒泡和事件捕获</title>
    <script src="./js/jquery-3.6.0.min.js"></script>
    <style>
        .div1, #div1 {
            width: 800px;
            height: 800px;
            background-color: lightcoral;
        }
        .div2, #div2 {
            width: 500px;
            height: 500px;
            background-color: lightgreen;
        }
        .div3, #div3 {
            width: 300px;
            height: 300px;
            background-color: lightblue;
        }
    </style>
</head>
<body>
    <h2 style="text-align: center;">事件冒泡</h2>
    <div class="div1">
        <div class="div2">
            <div class="div3"></div>
        </div>
    </div>
    <hr><hr>
    <h2 style="text-align: center;">事件捕获</h2>
    <div id="div1">
        <div id="div2">
            <div id="div3"></div>
        </div>
    </div>

    <script>
        /**
         * 冒泡从源代码上看：
         *     监听事件从最内层往外触发；
         * 从页面上看：
         *     监听事件从表面往深处触发；
         * 
         * 阻止冒泡可使用
         * 1、e.stopPropagation()
         * 2、window.event.cancelBubble = true （谷歌、IE8兼容、火狐不支持）
         * 3、合并取消：return false
         *     在JavaScript的return false只会阻止默认行为，用jQuery的话则即阻止默认行为又防止对象冒泡
        */
        let div1 = document.querySelector(".div1");
        let div2 = document.querySelector(".div2");
        let div3 = document.querySelector(".div3");

        div1.onclick = function() {
            console.log("*".repeat(17) + "\n", this.className, "\n" + "*".repeat(17));
        }
        div2.onclick = function() {
            console.log("*".repeat(17) + "\n", this.className, "\n" + "*".repeat(17));
        }
        // div3.onclick = function() {
        //     console.log("*".repeat(17) + "\n", this.className, "\n" + "*".repeat(17));
        //     // 第一个参数为事件event，使用event.stopPropagation()
        //     // arguments[0].stopPropagation();
        // }
        
        // 使用jQuery的合并取消取消冒泡
        $(".div3").on("click", function() {
            console.log("*".repeat(17) + "\n", this.className, "\n" + "*".repeat(17));
            return false;
        })

        let div_1 = document.getElementById("div1");
        let div_2 = document.getElementById("div2");
        let div_3 = document.getElementById("div3");
        const func = function() {
            console.log("*".repeat(17) + "\n", this.id, "\n" + "*".repeat(17));
        }
        div_1.addEventListener("click", func, true);
        div_2.addEventListener("click", func, true);
        div_3.addEventListener("click", func, true);


    </script>
</body>
</html>