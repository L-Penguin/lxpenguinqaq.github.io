<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片懒加载</title>
</head>
<body>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Obcaecati error praesentium ipsam ratione omnis modi asperiores nemo, fuga fugit, quia commodi ad nobis sunt laborum! Placeat sed iusto autem rem!
    Nostrum sed aspernatur vel, similique provident quis molestiae eum qui distinctio! Ea officiis, ut aspernatur quod quasi architecto aperiam nostrum maxime possimus enim nulla ab dolor nemo quam quibusdam illum?
    Reiciendis, consectetur nisi! Tenetur nihil numquam commodi cumque eligendi, veniam odit ratione officia nobis sit. Molestias numquam expedita cumque a omnis consequatur velit officia excepturi, nesciunt magni consequuntur, sunt dolorum!
    Id esse ea et aperiam ullam itaque culpa, reprehenderit adipisci, dolorum, corporis sint eaque earum tenetur unde error autem consequuntur aut inventore quia quos ipsa perspiciatis. In necessitatibus aliquam ratione?
    Modi eos nesciunt dignissimos minus necessitatibus. Quod praesentium velit ducimus deleniti ipsam aliquam cupiditate. Enim mollitia vel molestias quos dicta sunt porro ratione et praesentium ipsum. Aperiam repudiandae delectus officia!
    Illo, id quo rerum itaque facilis ad repellat laudantium ullam delectus ipsa maxime quia a animi enim soluta, numquam nam sapiente. Aut magni amet cumque vel vitae dolorum possimus magnam.
    Voluptas, sed officiis. Voluptatum consequatur ab neque qui sunt, tenetur numquam eligendi, harum earum repudiandae ad consectetur accusamus rem porro, quisquam sed ipsam totam adipisci dolores. Quasi ad hic quae!
    Dolores voluptas voluptates laboriosam recusandae possimus, nulla aspernatur saepe asperiores dolorum dicta. Sint repellendus ab architecto ea veniam perspiciatis cupiditate nam, minus ad maiores laborum distinctio. Doloribus aliquid perspiciatis corporis!
    Eaque omnis excepturi repudiandae dolorem distinctio sunt, provident obcaecati eveniet voluptates quis facere expedita at, deserunt iste similique, sapiente earum quaerat voluptatem totam eum nisi minima. Sequi consequuntur quasi dicta!
    Explicabo a molestias ratione velit distinctio error dolorem obcaecati modi tempore aliquid id soluta eligendi atque, alias impedit accusamus facere assumenda harum. Sed saepe quae deserunt accusamus asperiores ut dolorem!
    Aliquam debitis rerum laborum nemo provident neque quam voluptatibus. Aspernatur, voluptas reiciendis est eos sed et perspiciatis nesciunt quod? Vero culpa quasi repellendus ipsa, doloribus similique soluta odit possimus eius.
    Eum esse minima sequi fuga iure fugiat exercitationem ullam ea nihil sint voluptatibus dolorum, impedit dolorem, quia et? Pariatur, culpa! Deleniti cupiditate dicta culpa quos deserunt a sequi aperiam at.
    Unde ipsam laudantium amet eveniet cum. Quis architecto, consequatur corporis quaerat repellat neque laudantium velit ipsam natus provident nisi. Quo reprehenderit atque cumque rem aliquam iste quaerat id neque animi!
    Ipsam quia ex architecto amet, quasi beatae harum consequatur itaque. Alias, maiores repellendus? Voluptas amet maiores quidem iusto et animi! Quaerat repellendus quasi optio ex reiciendis obcaecati porro officia eum?
    Cum dicta culpa nobis nulla, alias eius voluptates unde obcaecati corrupti, sed explicabo vero autem non vitae quidem. Consequuntur sed minima ut natus sint culpa sit, nesciunt placeat! Magnam, tenetur?
    Quo recusandae aliquid tempora beatae tenetur, tempore enim dolores, fuga optio natus iure labore non. Blanditiis earum magnam perspiciatis, quo, ipsam ratione hic voluptas eos voluptate similique eveniet porro provident.
    Nam quia incidunt, quam nostrum iste unde, perferendis adipisci quis, eaque harum nihil neque molestiae sequi ut! Quo atque eveniet voluptatem expedita ullam, eius debitis? Tempora molestias voluptatum doloremque! Hic.
    Voluptas modi nesciunt laborum, autem sunt, fuga praesentium id at reprehenderit, pariatur quas. Soluta molestias ex sapiente necessitatibus nobis sit, minus modi repellat explicabo excepturi? Doloremque adipisci deserunt quisquam ducimus?
    Similique incidunt cumque ut minima tempora explicabo maxime officia laudantium iste, quis hic in voluptates quidem porro aliquam vero non reprehenderit harum eveniet quos! Rerum enim atque labore quas omnis.
    Iure id beatae, inventore consectetur odit alias doloribus necessitatibus eius accusamus nostrum iusto totam doloremque fugiat ex. Ratione tempore officiis corrupti blanditiis delectus, ea, repudiandae, assumenda debitis quam dolore labore.</p>
    <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Enim dignissimos alias numquam. Ipsam commodi dolorum vero in magni! Similique architecto nemo dolor nesciunt ad quisquam voluptatem repellat esse quod aperiam!
    Autem facilis numquam veniam, culpa nam voluptatum voluptates hic provident quis consequuntur blanditiis temporibus ea nemo sunt vel eos nesciunt quas earum natus error cum! Tempore corrupti ut quasi inventore.
    In debitis exercitationem voluptatem blanditiis tenetur quo eveniet sunt, veniam ab, error dolor dolorum, odit odio suscipit molestias minima quisquam recusandae reprehenderit. Et in esse minima suscipit deleniti. Corporis, vero.</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Harum soluta neque vel voluptas sunt necessitatibus quaerat. Sunt officiis, quam quis obcaecati quia, sed earum, a cum deleniti ab nobis! Perspiciatis?
    Asperiores sint necessitatibus aliquid vero facilis possimus exercitationem, qui molestiae? Quam corporis illum, laboriosam reiciendis velit rerum earum autem reprehenderit sed hic iusto ipsum, quasi enim ea, voluptate quis nesciunt!
    Quas nobis soluta vero, quia, harum facere ipsam unde aspernatur numquam inventore modi veniam fuga. Quidem et accusamus impedit optio fugiat corrupti ad recusandae, velit voluptatem deserunt architecto aliquam quos.
    Fugit laboriosam fugiat minus facere corporis incidunt eos vero optio necessitatibus, ad libero dolorem blanditiis ut. Similique debitis qui beatae reprehenderit eligendi fugiat, perferendis, dolore sunt expedita ad magnam quam.
    Accusamus suscipit ducimus a autem, impedit eaque quos alias excepturi dicta labore sapiente explicabo nobis, similique, iure esse! Nostrum optio doloribus velit laudantium quasi commodi distinctio atque consectetur expedita? Illum.
    At dolor illo nam facilis adipisci similique quae ducimus sequi. Soluta eos corrupti nam nobis! Harum laborum, voluptatibus quo similique est, ipsum id, fugiat laboriosam praesentium quam magni voluptatem numquam.
    Eaque inventore, aut molestiae voluptatum ab dicta totam autem, culpa beatae quidem quis nostrum optio ullam doloribus ad cupiditate fugit velit eum eveniet assumenda architecto reiciendis natus recusandae. Saepe, nobis.
    Molestias ipsam incidunt inventore quo placeat quae corrupti provident facilis repellat quibusdam adipisci reiciendis cum laudantium ducimus voluptatibus fugiat vitae, iste enim dolores libero sunt. Exercitationem repellat id excepturi facilis?
    Facilis sint architecto voluptas, illum veritatis animi mollitia, fugit adipisci eum, beatae iste! Quas, aut? Incidunt sunt quasi qui mollitia sed beatae fugiat perspiciatis excepturi nulla, amet iure ratione repellendus.
    Assumenda molestias, officiis reiciendis hic perferendis laborum et consectetur nulla. Id, laboriosam! Consequatur voluptatibus unde, eos nemo ipsa praesentium at nostrum culpa deleniti dicta quibusdam provident alias aperiam quasi. Aperiam?
    Sit doloremque perspiciatis consequuntur alias corrupti beatae veritatis ipsum animi, quae quas molestias ex odit aliquam eligendi ducimus quod et error recusandae, reprehenderit fuga optio voluptatibus? Soluta nemo ex ipsam?
    Dolores sapiente iste quibusdam. Recusandae dolor rem natus labore iusto id! Corporis quaerat libero, impedit cupiditate officiis fuga quos natus, nemo velit neque deserunt facilis expedita reprehenderit provident omnis ipsa?
    Eaque nobis fugiat ad a blanditiis ipsa, distinctio atque sit doloremque necessitatibus asperiores in incidunt placeat quos nam voluptates vero, quasi perferendis ratione adipisci hic! Quam beatae voluptas quisquam error.
    Excepturi ad alias architecto. Cum corrupti aperiam facere laborum hic laudantium est ipsam commodi nihil, facilis veniam obcaecati fuga aut totam minus deserunt fugiat! Corporis maiores voluptate cumque corrupti perferendis.
    Mollitia sit quod quis, quibusdam optio quia repellat, accusamus voluptatum ullam exercitationem dolores similique unde. Dolores eaque error illo in quam hic eveniet necessitatibus eos. Necessitatibus nihil soluta aspernatur repudiandae.
    Dolor, et in maiores nesciunt labore, voluptas dolores perspiciatis accusamus earum repudiandae nostrum, officia illo sit magnam natus error neque debitis. Corporis sapiente eum quae illum, culpa alias vitae quos.</p>
    <img data-src="./images/apples.jpg" alt="loading">
    <img data-src="./images/bananas.jpg" alt="loading">
    <img data-src="./images/dog.gif" alt="loading">
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam odio nobis eveniet incidunt placeat autem rem nam repellendus. Dolor repellendus quis atque? Unde, ullam! Tempora ex odio et? Vitae, suscipit?
    Sint eius qui distinctio dolorem quo quidem similique unde. Esse corporis et, consequatur temporibus obcaecati fugiat dolores sequi eaque? Nulla corporis at suscipit eius quasi architecto recusandae dolore. Quas, vel.
    Odio tenetur, expedita quas facere exercitationem consequatur ipsa, ad dolorum at magni ipsum libero nobis neque cum in maxime atque quisquam alias repellendus earum eum. Beatae quis tempora sit odit?
    Blanditiis illum dicta quod architecto harum, natus labore consequatur totam debitis nulla tenetur, expedita minima velit magnam sequi provident culpa aut ea voluptas! Nesciunt, animi odit ipsam eveniet doloremque omnis?</p>
    <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reprehenderit beatae, nihil cum illo eaque, cupiditate et, omnis quisquam tempora vero earum ab voluptate veniam facere. Praesentium labore harum ullam laborum.
    Nulla harum architecto, in possimus at consectetur voluptatibus dignissimos quos perspiciatis doloremque odio porro tempore. Cupiditate at commodi deleniti magni, esse quo cumque, ipsum quod mollitia molestiae consequatur odio numquam.
    Porro saepe nesciunt at labore laudantium vel, culpa magni similique esse, officiis voluptatum ex amet deserunt praesentium, ducimus odio repudiandae ut exercitationem maxime magnam eum facilis dicta! Reprehenderit, maiores possimus!
    Eaque eos quibusdam illo recusandae quae? Ad autem rem quia repellat harum ea deleniti, quam distinctio culpa corrupti. Quod exercitationem consequatur officiis error veritatis consectetur cumque explicabo, corporis animi quis!
    Minus necessitatibus deserunt eveniet rerum officiis sed omnis, quis quasi accusamus. Asperiores consequuntur quo in placeat! Debitis magni rerum ipsa maiores quisquam fugiat ea cumque, beatae fugit quos, quibusdam nobis.
    Modi maiores perspiciatis nostrum tempore voluptate ipsam temporibus debitis consequatur est mollitia. Exercitationem, nulla fugiat nobis eos unde maxime deleniti voluptatum, quod et, fugit doloribus minus fuga deserunt? Suscipit, modi.
    Beatae pariatur soluta consectetur! Consequatur dolores sint quo in impedit illo quibusdam iste. Iure itaque porro debitis possimus voluptates commodi est iste consectetur repudiandae enim. Perspiciatis, facere. Minima, tempora rerum.
    Assumenda libero possimus sed eaque laudantium debitis deserunt cumque nobis suscipit, ad est tempora consequatur perspiciatis quisquam sit ipsam ratione deleniti quam eum. Eaque esse veniam nihil officia quisquam! Minima.
    Sed porro tempore facere, illum ad quidem voluptates quod praesentium optio. Voluptate necessitatibus unde culpa, magnam totam natus suscipit sit incidunt doloremque. Iste quibusdam id amet sit minima reprehenderit accusantium.
    Eos voluptates animi amet omnis fugit nemo architecto optio iure mollitia quo reprehenderit enim consequuntur eum magnam sapiente, recusandae perspiciatis accusantium quam blanditiis, repudiandae eaque. Mollitia itaque impedit voluptatem pariatur.
    Excepturi et at eos, numquam mollitia facere suscipit deserunt beatae consequatur incidunt fugiat perspiciatis sint dolorem similique doloremque. Eos reprehenderit exercitationem nam totam mollitia neque porro id non, minima ut?
    Provident quis non omnis ullam. Beatae autem sapiente quibusdam molestias soluta pariatur magni atque doloribus rerum cumque amet ad voluptatibus est vitae iure, quae debitis, delectus veritatis quis molestiae. Cumque.
    Voluptates, veniam? Commodi illum maxime laudantium quas? Non, doloremque distinctio. Expedita sapiente optio ab soluta consectetur quas nam reiciendis est architecto sunt incidunt, natus dignissimos voluptatum impedit eum a dolorum.
    Facilis laboriosam, nemo animi dolor eos impedit hic natus tempore non fugit odio nam amet, minima et nobis vel. Necessitatibus obcaecati tenetur expedita maxime vero laboriosam culpa voluptates veritatis laborum.
    Molestias repudiandae cum nostrum quaerat dolore officiis repellendus eveniet accusamus laboriosam blanditiis! Reiciendis distinctio aliquam, pariatur delectus dicta, ab architecto culpa ullam minima in optio dolor repudiandae corporis officiis rem!
    Fugiat, qui. Saepe nam praesentium illo, laborum accusamus ipsam autem neque, veritatis vero tempora doloribus ea, quibusdam dolores eum eaque est quo temporibus officiis sunt? Praesentium facilis quod rerum quia?</p>
    <img data-src="./images/fingers.gif" alt="loading">
    <!-- 采用原生监听scroll实现 -->
    <!-- <script>
        const images = document.querySelectorAll('img');

        window.addEventListener('scroll', (event)=> {
            images.forEach((image)=> {
                const imageTop = image.getBoundingClientRect().top;
                if (imageTop < window.innerHeight) {
                    const data_src = image.getAttribute('data-src');
                    image.setAttribute('src', data_src);
                    console.log("触发")
                }
            })
        })
    </script> -->
    <!-- 采用IntersectionObserver -->
    <script>
        const images = document.querySelectorAll('img');

        const callback = entries=> {
            entries.forEach(entry=> {
                if (entry.isIntersecting) {
                    const image = entry.target;
                    const data_src = image.getAttribute('data-src');
                    image.setAttribute('src', data_src);
                    observer.unobserve(image);
                    console.log("触发");
                }
            })
        };

        const observer = new IntersectionObserver(callback);

        images.forEach(image=> {
            observer.observe(image);
        })
    </script>
</body>
</html>